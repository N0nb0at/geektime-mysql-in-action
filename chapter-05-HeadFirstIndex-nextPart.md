---
title: MySQL-05-深入浅出索引（下）
date: 2019/04/02 08:54:54
categories: 
  - [MySQL-in-Action]
tags: 
  - [geektime]
  - [MySQL]
---

回到主键索引树搜索的过程，称为回表。

<!-- more -->

## 覆盖索引

如果执行的语句是 `SELECT ID FROM T WHERE k BETWEEN 3 AND 5;`，这是只需要查 ID 的值，而 ID 的值已经在 k 索引树上了，因此可以直接提供查询结果，不需要回表。也就是说，这个查询里面，索引 k 已经『覆盖了』查询需求，称之为覆盖索引。

由于覆盖索引可以减少输的搜索次数，显著提升查询性能，所以使用覆盖索引是一个常用的性能优化手段。

当然，索引字段的维护总是有代价的。因此，在建立冗余索引来支持覆盖索引时就需要权衡考虑了。

## 最左前缀原则

不只是索引的全部定义，只要满足最左前缀，就可以利用索引来加速检索。这个最左前缀可以使联合索引的最左 N 个字段，也可以是字符串索引的最左 M 个字符。

建立联合索引的原则：

第一原则是，如果通过调整顺序，可以少维护一个索引，那么这个顺序往往就是需要优先考虑采用的；

如果既有联合查询，又有基于 a、b 各自的查询，查询条件里面只有 b 的语句，是无法使用 `(a, b)` 这个联合索引的，这时候不得不维护 `(a, b)`、`(b)` 两个索引。这时候，我们要**考虑的原则就是空间**了。如果 a 字段比 b 字段大，那么就建议创建一个 `(a, b)` 的联合索引和一个 `(b)` 的单字段索引。

## 索引下推

MySQL 5.6 引入的索引下推优化（index condition pushdown），可以在索引遍历过程中，对索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数。


